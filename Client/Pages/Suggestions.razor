@page "/Suggestions"
@using System.ComponentModel.DataAnnotations
@using Microsoft.AspNetCore.Authorization

@attribute [Authorize(Roles = "User")]

<h3>Suggestions</h3>
<p>Thank you for using our app. As we are in alpha version, we would appreciate your feedback. Please let us know how we can improve.</p>

<EditForm Model="userSuggestion" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group">
        <label for="name">Your Name:</label>
        <InputText id="name" class="form-control" @bind-Value="userSuggestion.Name" />
        <ValidationMessage For="@(() => userSuggestion.Name)" />
    </div>

    <div class="form-group">
        <label for="email">Your Email:</label>
        <InputText id="email" class="form-control" @bind-Value="userSuggestion.Email" />
        <ValidationMessage For="@(() => userSuggestion.Email)" />
    </div>

    <div class="form-group">
        <label for="suggestion">Your Suggestion:</label>
        <InputTextArea id="suggestion" class="form-control" @bind-Value="userSuggestion.Suggestion" />
        <ValidationMessage For="@(() => userSuggestion.Suggestion)" />
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
</EditForm>

@code {
    private UserSuggestion userSuggestion = new UserSuggestion();

    private void HandleValidSubmit()
    {
    // Put your code here to handle the suggestion, e.g. sending it to an API or database.
        Console.WriteLine("Suggestion submitted successfully");
    }

    public class UserSuggestion
    {
        [Required, MaxLength(50)]
        public string Name { get; set; }

        [Required, EmailAddress]
        public string Email { get; set; }

        [Required, MaxLength(500)]
        public string Suggestion { get; set; }
    }
}